package com.example.cleanarchslvglass.presentation.authimport android.content.Intentimport androidx.appcompat.app.AppCompatActivityimport android.os.Bundleimport android.widget.Toastimport androidx.lifecycle.ViewModelProviderimport com.example.cleanarchslvglass.databinding.ActivitySignInBindingimport com.example.cleanarchslvglass.domain.models.Resourceimport com.example.cleanarchslvglass.domain.models.Userimport com.example.cleanarchslvglass.presentation.MainActivityimport com.example.cleanarchslvglass.presentation.viewmodel.AuthViewModelimport dagger.hilt.android.AndroidEntryPoint@AndroidEntryPointclass SignInActivity : AppCompatActivity() {    private lateinit var viewModel: AuthViewModel    private lateinit var binding: ActivitySignInBinding    override fun onCreate(savedInstanceState: Bundle?) {        super.onCreate(savedInstanceState)        binding = ActivitySignInBinding.inflate(layoutInflater)        setContentView(binding.root)        viewModel = ViewModelProvider(this)[AuthViewModel::class.java]    }    override fun onResume() {        super.onResume()        val email = binding.emailIn.text        val password = binding.passwordIn.text        val notYet = binding.NotYet        val signInButton = binding.signIn        notYet.setOnClickListener {            val intent = Intent(this, SignUpActivity::class.java)            startActivity(intent)        }        signInButton.setOnClickListener {            if (                email!!.isNotEmpty()                && password!!.isNotEmpty()            ) {                val user = User(email = email.toString())                viewModel.signIn(user = user, password = password.toString()).runCatching {                    when(val state = viewModel.signInState.value!!) {                        is Resource.Loading -> {                            Toast.makeText(this@SignInActivity, "Загрузка", Toast.LENGTH_SHORT).show()                        }                        is Resource.Success -> {                            if (state.result){                                val intent = Intent(this@SignInActivity, MainActivity::class.java)                                startActivity(intent)                                Toast.makeText(this@SignInActivity, "Успешно", Toast.LENGTH_SHORT).show()                            }                        }                        is Resource.Failure -> {                            Toast.makeText(this@SignInActivity, state.exception, Toast.LENGTH_LONG).show()                        }                    }                }            }        }    }    override fun onStart() {        if (viewModel.checkUser()){            val intent = Intent(this, MainActivity::class.java)            startActivity(intent)        }                super.onStart()    }}